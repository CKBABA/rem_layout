<!DOCTYPE HTML>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
	<script>
		;(function(psdWidth,defaultRootFontSize,maxRootFontSize){
			// d,w,delay,on为了代码更短
			var d = document
			var w = window
			var delay = setTimeout
			var on = 'addEventListener'

			var head = d.head || d.getElementsByTagName('HEAD')[0]
			var style = d.createElement('STYLE') // 采用拼css的形式，而不是直接用document.documentElement.style.fontSize的形式的原因是，拼css可以通过加入!important获得最高优先级，http://jsbin.com/dopupudago/2/edit?html,js,output
			var resizeEventThrottleTimer

			// 移除任何text-size-adjust对字体大小的改变效果
			var textSizeAdjustCSS = 'text-size-adjust:100%;'
			var textSizeAdjustCSSAll = 
				'-webkit-'+textSizeAdjustCSS
				+'-moz-'+textSizeAdjustCSS
				+'-ms-'+textSizeAdjustCSS
				+'-o-'+textSizeAdjustCSS
				+textSizeAdjustCSS
			
			var lastRootFontSize = null // 上一次设置的html的font-size
			function setRem(){
				var rootFontSize = Math.min(
					w.innerWidth // iOS和桌面设备的window.innerWidth一直是准确的，直接使用
						/(psdWidth/defaultRootFontSize)
					,maxRootFontSize // html的font-size最大不超过设定的最大值。它的作用是，当用户用非常宽的屏幕（pad、pc）访问页面时，不至于使得根元素的font-size超过这个值。见图“show/wide_max_rem.jpg”
				)
				// alert('iW_'+w.innerWidth+'  sw_'+w.screen.width+'  dpr_'+devicePixelRatio+'  or_'+w.orientation)
				if(rootFontSize != lastRootFontSize){
					// alert('iW_'+w.innerWidth+'  sw_'+w.screen.width+'  dpr_'+devicePixelRatio+'  or_'+w.orientation)
					// return
					style.innerHTML = 
						'html{'
						+	'font-size:'+rootFontSize+'px!important;' // 20=320/16 // 取16为默认html的font-size是因为浏览器都默认为16，不会导致抖动
						+	textSizeAdjustCSSAll
						+'}'
					lastRootFontSize = rootFontSize
				}
			}

			psdWidth = psdWidth || 320
			defaultRootFontSize = defaultRootFontSize || 16
			maxRootFontSize = maxRootFontSize || 32
			head.appendChild(style)

			setRem()
			d[on]('DOMContentLoaded',setRem,false)
			w[on]('load',setRem,false)
			w[on]('resize',function(){
				clearTimeout(resizeEventThrottleTimer)
				resizeEventThrottleTimer = delay(setRem,500)
			},false)
		})(
			320, // 设置设计稿基准宽度
			16, // 设置默认根元素font-size 最好设置为16，因为浏览器默认的值就是16，这样代码失效或尚未起效时，不会有布局问题
			32 // 设置最大根元素font-size 它的作用是，当用户用非常宽的屏幕（pad、pc）访问页面时，不至于使得根元素的font-size超过这个值
		)
	</script>
	<title>rem_without_android</title>
	<style>
		html,body{margin: 0;padding: 0;}
	</style>
</head>
<body>
	<div id="debug">
		
	</div>
	<div id="wrapper">
		<!-- content text -->
		<p style="
		    font-size:1rem
		    /*通过 font-size:16px; 除以16计算出来*/
		">一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十</p>
		
		<!-- icon -->
		<img src="up.png" alt="向上" style="position:fixed;
		    bottom:0.625rem;right:0.625rem;width:3rem;height:3rem;
		    /*通过 bottom:10px;right:10px;width:48px;height:48px; 各除以16计算出来*/
		">

		<!-- photo -->
		<img src="p1.jpg" alt="向上" style="margin:0 auto;display:block;
		    width:18.75rem;height:12.5rem;
		    /*通过 width:300px;height:200px; 各除以16计算出来*/
		">

	</div>
	<script>

	</script>
</body>
</html>